<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tasks List</title>
  </head>
  <body>
    <a href="http://localhost:3000/"><h1>Tasks List</h1></a>

    <form action="/add" method="POST" enctype="multipart/form-data">
      <input type="text" name="title" placeholder="Task title" required />
      <select name="status">
        <option value="pending">Pending</option>
        <option value="completed">Completed</option>
      </select>
      <input type="date" name="dueDate" required />
      <input type="file" name="file" />
      <button type="submit">Add Task</button>
    </form>

    <form action="/filter" method="POST">
      <select name="status">
        <option value="pending">Pending</option>
        <% if(typeof filter !== 'undefined' && filter !== null && filter === 'completed') {%>
          <option value="completed" selected>Completed</option>
        <%} else {%>
          <option value="completed">Completed</option>
        <%}%>
      </select>
      <button type="submit">Filter</button>
    </form>
    <form action="http://localhost:3000">
      <button type="submit">Remove filters</button>
    </form>

    <ul>
      <% tasks.forEach(task => { %>
      <li>
        <strong><%= task.title %></strong> - <%= task.status %> - <%=
        task.dueDate %> <% if (task.file) { %>
        <a href="/<%= task.file %>" target="_blank">View File</a>
        <% } %>
      </li>
      <% }) %>
    </ul>
  </body>
</html>